{"version":3,"sources":["components/constructor-content/constructor-content.module.scss","components/burger-ingredients/tabs/tabs.module.scss","components/burger-ingredients/ingredients-list/ingredients-list.module.scss","components/burger-constructor/burger-constructor.module.scss","components/modal-overlay/modal-overlay.module.scss","components/feed-list/feed-list.module.scss","pages/ingredient/ingredient.module.scss","components/app-header/app-header.module.scss","components/app-header/logo-wrapper/logo-wrapper.module.scss","components/app-header/profile-link/profile-link.module.scss","components/feed-stats/feed-stats.module.scss","components/ingredient-details/ingredient-details.module.scss","components/feed-item/feed-item.module.scss","constants/api.ts","utils/index.tsx","utils/cookie.ts","services/slices/order/order.ts","services/slices/burger/burger.ts","services/slices/password/password.ts","services/slices/user/user.ts","services/slices/auth/auth.ts","services/slices/feed/feed.ts","services/root-reducer.ts","services/store.ts","services/middleware/socket.tsx","components/burger-ingredients/tabs/tabs.tsx","components/burger-ingredients/ingredient/ingredient.tsx","components/burger-ingredients/ingredients-list/ingredients-list.tsx","components/burger-ingredients/ingredients-group/ingredients-group.tsx","components/burger-ingredients/burger-ingredients.tsx","components/burger-constructor/cart/cart.tsx","components/burger-constructor/burger-element/burger-element.tsx","components/burger-constructor/ingredients-list/ingredients-list.tsx","components/burger-constructor/burger-constructor.tsx","components/constructor-content/constructor-content.tsx","components/error/error.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","images/done.png","components/order-details/order-details.tsx","pages/constructor/constructor.tsx","components/feed-item/feed-item.tsx","components/feed-list/feed-list.tsx","components/feed-stats/feed-stats.tsx","components/loader/loader.tsx","pages/feed/feed.tsx","components/order-info/order-info.tsx","pages/feed-order/feed-order.tsx","pages/login/login.tsx","pages/register/register.tsx","pages/forgot-password/forgot-password.tsx","pages/reset-password/reset-password.tsx","pages/not-found/not-found.tsx","components/profile-nav/profile-nav.tsx","components/profile-form/profile-form.tsx","pages/profile/profile.tsx","pages/history/history.tsx","components/ingredient-details/ingredient-details.tsx","pages/ingredient/ingredient.tsx","components/link-item/link-item.tsx","components/app-header/logo-wrapper/logo-wrapper.tsx","components/app-header/profile-link/profile-link.tsx","components/app-header/nav/nav.tsx","components/app-header/app-header.tsx","components/protected-route/protected-route.tsx","components/protected-route-authorized/protected-route-authorized.tsx","components/protected-route-with-reset/protected-route-with-reset.tsx","components/feed-modal/feed-modal.tsx","components/app/app.tsx","index.tsx","components/order-info/order-info.module.scss","components/profile-nav/profile-nav.module.scss","components/burger-ingredients/ingredient/ingredient.module.scss","components/burger-constructor/ingredients-list/ingredients-list.module.scss","pages/form.module.scss","components/modal/modal.module.scss","components/order-details/order-details.module.scss","components/profile-form/profile-form.module.scss","components/burger-constructor/cart/cart.module.scss","components/app-header/nav/nav.module.scss","pages/profile/profile.module.scss","components/burger-constructor/burger-element/burger-element.module.scss","pages/feed/feed.module.scss","pages/not-found/not-found.module.scss","components/link-item/link-item.module.scss","components/burger-ingredients/burger-ingredients.module.scss","pages/feed-order/feed-order.module.scss"],"names":["module","exports","API_URL","WS_URL","INGREDIENTS_URL","ORDER_URL","REGISTER_URL","LOGIN_URL","LOGOUT_URL","USER_INFO_URL","REFRESH_TOKEN_URL","SEND_RESET_PASSWORD_EMAIL_URL","RESET_PASSWORD_URL","ALL_ORDERS_URL","checkResponse","res","ok","json","then","err","Promise","reject","setFetchSettings","method","authorizationHeader","bodyPayload","headers","Authorization","body","JSON","stringify","getDateTime","time","date","formatRelative","Date","locale","ruLocale","dateCapitalized","charAt","toUpperCase","slice","replace","gmt","format","getCookie","name","matches","document","cookie","match","RegExp","decodeURIComponent","undefined","setCookie","value","days","expires","setTime","getTime","toUTCString","setCookies","payload","accessToken","split","refreshToken","deleteCookie","createOrder","createAsyncThunk","order","a","fetchSettings","fetch","response","getOrderInfo","id","orderSlice","createSlice","initialState","orderId","constructorElementsIds","isLoading","isOrderModalOpened","reducers","setOrderElementsIds","state","action","resetOrder","closeOrderModal","extraReducers","builder","addCase","pending","fulfilled","number","rejected","orders","actions","getIngredients","burgerSlice","ingredients","bun","constructorIngredients","hasError","addConstructorBun","addConstructorIngredient","reducer","push","prepare","ingredient","constructorIngredientId","uuidv4","deleteConstructorIngredient","filter","moveConstructorItem","arr","dragItem","dragIndex","hoverItem","hoverIndex","data","sendResetPasswordEmail","resetPassword","passwordSlice","isResetEmailSent","isPasswordReset","isLoggedIn","user","fetchWithRefresh","url","message","refreshTokenRequest","refreshData","token","getUserInfoRequest","updateUserInfoRequest","userSlice","registerRequest","loginRequest","logoutRequest","authSlice","WS_CONNECTION_START","createAction","WS_CONNECTION_CLOSE","ordersFeed","total","totalToday","wsConnected","error","wsConnectionOpened","wsConnectionClosed","wsConnectionError","wsGetMessage","rootReducer","combineReducers","burger","burgerReducer","orderReducer","password","passwordReducer","auth","authReducer","userReducer","feed","feedReducer","middleware","store","socket","next","dispatch","type","toString","WebSocket","close","onopen","onclose","onerror","onmessage","event","parse","getDefaultMiddleware","configureStore","devTools","process","useSelector","selectorHook","useDispatch","dispatchHook","Tabs","inViewBuns","inViewSauces","inViewMains","React","useState","current","setCurrent","setTab","element","getElementById","scrollIntoView","behavior","useEffect","className","styles","tabs","active","onClick","Ingredient","image","price","_id","location","useLocation","counters","useMemo","counter","forEach","useDrag","item","collect","monitor","isDragging","dragRef","opacity","style","ref","count","size","link","to","pathname","background","src","alt","priceWrapper","IngredientsList","list","map","IngredientsGroup","forwardRef","filteredIngredients","title","groupId","buns","sauces","main","BurgerIngredients","useInView","threshold","bunsRef","saucesRef","mainsRef","content","ingredientsWrapper","Cart","history","useHistory","totalPrice","bunPrice","reduce","acc","el","orderBtn","totalWrapper","loader","BurgerElement","isLocked","draggable","text","thumbnail","idx","useRef","useDrop","accept","handlerId","getHandlerId","hover","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","hoverClientY","getClientOffset","y","dropRef","fixed","data-handler-id","handleClose","length","isHover","isOver","drop","handleDrop","dropTarget","backgroundColor","burgerElementsList","index","constructorContent","scrollHeight","fixedHeight","BurgerConstructor","ConstructorContent","DndProvider","backend","HTML5Backend","Error","ModalOverlay","onModalClose","overlay","modalRoot","Modal","orderNumber","children","onEscPress","e","key","addEventListener","removeEventListener","createPortal","wrapper","modal","header","icon","OrderDetails","titleText","done","width","height","Constructor","FeedItem","orderIngredients","createdAt","feedOrderIngredients","includes","flexWrapper","datetime","images","i","ing","imagesItem","image_mobile","showImages","FeedList","FeedStats","doneOrders","inProgressOrders","status","feedStats","orderNumbers","orderStatus","digits","textGreen","totalTitle","digitsLarge","Loader","Feed","feedWrapper","OrderInfo","imgWrapper","img","FeedOrder","useParams","Login","email","formData","setFormData","onChange","target","formWrapper","form","onSubmit","preventDefault","formTitle","inputWrapper","placeholder","formText","formLink","Register","ForgotPassword","from","ResetPassword","inputRef","isPasswordVisible","setIsPasswordVisible","onIconClick","prevState","NotFound404","ProfileNav","nav","activeClassName","activeLink","exact","button","info","ProfileForm","onCancelClick","buttonsWrapper","Profile","History","IngredientDetails","withTitle","find","image_large","calories","proteins","fat","carbohydrates","amount","LinkItem","Icon","LogoWrapper","logo","ProfileLink","profile","ProfileIcon","Nav","BurgerIcon","ListIcon","AppHeader","ProtectedRoute","rest","render","ProtectedRouteAuthorized","ProtectedRouteWithReset","FeedModal","App","onOrderInfoModalClose","goBack","path","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.73009dc3.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"constructor-content_main__2hbfV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tabs\":\"tabs_tabs__1dmZd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"ingredients-list_list__lTAN1 pt-6 pl-4 pr-2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"burger-constructor_content__TBw4u pl-4 mt-25\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal-overlay_overlay__3YpaF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"feed-list_list__akl00 pl-2 pr-2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ingredient_wrapper__qJhSW mt-30\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__i0rql pt-4 pb-4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logo\":\"logo-wrapper_logo__3oE4n ml-4 mr-4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"profile-link_profile__12wNM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"feedStats\":\"feed-stats_feedStats__PmXNW\",\"flexWrapper\":\"feed-stats_flexWrapper__19OlV mb-15\",\"list\":\"feed-stats_list__3jJt5\",\"orderNumbers\":\"feed-stats_orderNumbers__20roQ\",\"orderStatus\":\"feed-stats_orderStatus__1HSHf text text_type_main-medium mb-6\",\"totalWrapper\":\"feed-stats_totalWrapper__1erNl mb-10\",\"totalTitle\":\"feed-stats_totalTitle__2lH53 text text_type_main-medium\",\"digits\":\"feed-stats_digits__1RTyx text text_type_digits-default mb-2\",\"digitsLarge\":\"feed-stats_digitsLarge__2G4WU text_type_digits-large\",\"textGreen\":\"feed-stats_textGreen__Awazz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image\":\"ingredient-details_image__3A2QS\",\"title\":\"ingredient-details_title__1Ot3N text text_type_main-large\",\"name\":\"ingredient-details_name__2eP1H text text_type_main-medium\",\"flexWrapper\":\"ingredient-details_flexWrapper__19hPY\",\"text\":\"ingredient-details_text__2VirO text text_color_inactive\",\"amount\":\"ingredient-details_amount__2_fpB text_type_digits-default\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"feed-item_item__1cWhM mb-4 p-6\",\"flexWrapper\":\"feed-item_flexWrapper__2V8ns\",\"order\":\"feed-item_order__lEhFM text text_type_digits-default\",\"datetime\":\"feed-item_datetime__1mnUp text text_type_main-default text_color_inactive\",\"name\":\"feed-item_name__1CpBo text text_type_main-medium mb-6\",\"images\":\"feed-item_images__3DOjw mr-6\",\"imagesItem\":\"feed-item_imagesItem__2sYyq text text_type_main-default\",\"image\":\"feed-item_image__g4eRY\",\"count\":\"feed-item_count__1BZZ1\",\"priceWrapper\":\"feed-item_priceWrapper__aJjRV\",\"price\":\"feed-item_price__2sBJY text text_type_digits-default mr-2\"};","const API_URL = 'https://norma.nomoreparties.space/api';\r\nexport const WS_URL = 'wss://norma.nomoreparties.space/orders';\r\nexport const INGREDIENTS_URL = `${API_URL}/ingredients`;\r\nexport const ORDER_URL = `${API_URL}/orders`;\r\nexport const REGISTER_URL = `${API_URL}/auth/register`;\r\nexport const LOGIN_URL = `${API_URL}/auth/login`;\r\nexport const LOGOUT_URL = `${API_URL}/auth/logout`;\r\nexport const USER_INFO_URL = `${API_URL}/auth/user`;\r\nexport const REFRESH_TOKEN_URL = `${API_URL}/auth/token`;\r\nexport const SEND_RESET_PASSWORD_EMAIL_URL = `${API_URL}/password-reset`;\r\nexport const RESET_PASSWORD_URL = `${API_URL}/password-reset/reset`;\r\nexport const ALL_ORDERS_URL = `${WS_URL}/all`;\r\n","import { format, formatRelative } from 'date-fns';\r\nimport ruLocale from 'date-fns/locale/ru';\r\nimport {\r\n  TRefreshTokenRequestBodyPayload,\r\n  TUpdateUserInfoRequestBodyPayload,\r\n} from '../services/slices/user/types';\r\nimport {\r\n  TResetPasswordEmailBodyPayload,\r\n  TSendResetPasswordEmailBodyPayload,\r\n} from '../services/slices/password/types';\r\nimport { TCreateOrderBodyPayload, TGetOrderInfoBodyPayload } from '../services/slices/order/types';\r\nimport {\r\n  TLoginRequestBodyPayload,\r\n  TLogoutRequestBodyPayload,\r\n  TRegisterRequestBodyPayload,\r\n} from '../services/slices/auth/types';\r\n\r\nexport const checkResponse = (res: Response) => {\r\n  return res.ok ? res.json() : res.json().then((err: string) => Promise.reject(err));\r\n};\r\n\r\ntype TFetchSettingsBodyPayload =\r\n  | TRefreshTokenRequestBodyPayload\r\n  | TUpdateUserInfoRequestBodyPayload\r\n  | TSendResetPasswordEmailBodyPayload\r\n  | TResetPasswordEmailBodyPayload\r\n  | TCreateOrderBodyPayload\r\n  | TGetOrderInfoBodyPayload\r\n  | TRegisterRequestBodyPayload\r\n  | TLoginRequestBodyPayload\r\n  | TLogoutRequestBodyPayload;\r\n\r\nexport const setFetchSettings = (\r\n  method: string,\r\n  authorizationHeader?: string,\r\n  bodyPayload?: TFetchSettingsBodyPayload\r\n) => {\r\n  return {\r\n    method: method,\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      Authorization: authorizationHeader,\r\n    },\r\n    body: JSON.stringify(bodyPayload),\r\n  };\r\n};\r\n\r\nexport const getDateTime = (time: string) => {\r\n  const date = formatRelative(new Date(time), new Date(), { locale: ruLocale });\r\n  const dateCapitalized = date.charAt(0).toUpperCase() + date.slice(1).replace(' в', ',');\r\n  const gmt = format(new Date(time), 'O').replace('GMT', 'i-GMT');\r\n  return `${dateCapitalized} ${gmt}`;\r\n};\r\n","export const getCookie = (name: string) => {\r\n  const matches = document.cookie.match(\r\n    // eslint-disable-next-line\r\n    new RegExp('(?:^|; )' + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + '=([^;]*)')\r\n  );\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n};\r\n\r\nexport const setCookie = (name: string, value: string, days?: number) => {\r\n  let expires = '';\r\n  if (days) {\r\n    const date = new Date();\r\n    date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\r\n    expires = '; expires=' + date.toUTCString();\r\n  }\r\n  document.cookie = name + '=' + (value || '') + expires + '; path=/';\r\n};\r\n\r\nexport const setCookies = (payload: { accessToken: string; refreshToken: string }) => {\r\n  const accessToken = payload.accessToken.split('Bearer ')[1];\r\n  const refreshToken = payload.refreshToken;\r\n  setCookie('accessToken', accessToken);\r\n  setCookie('refreshToken', refreshToken);\r\n};\r\n\r\nexport const deleteCookie = (name: string) => {\r\n  document.cookie = name + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';\r\n};\r\n","import { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\nimport { ORDER_URL } from '../../../constants/api';\r\nimport { checkResponse, setFetchSettings } from '../../../utils';\r\nimport { getCookie } from '../../../utils/cookie';\r\nimport {\r\n  TCreateOrderBodyPayload,\r\n  TCreateOrderResponse,\r\n  TGetOrderInfoBodyPayload,\r\n  TGetOrderInfoResponse,\r\n  TOrderState,\r\n} from './types';\r\n\r\nexport const initialState: TOrderState = {\r\n  orderId: null,\r\n  constructorElementsIds: [],\r\n  isLoading: false,\r\n  order: null,\r\n  isOrderModalOpened: false,\r\n};\r\n\r\nexport const createOrder = createAsyncThunk(\r\n  'burger/createOrder',\r\n  async (order: TCreateOrderBodyPayload): Promise<TCreateOrderResponse> => {\r\n    const fetchSettings = setFetchSettings('POST', `Bearer ${getCookie('accessToken')}`, order);\r\n    const response = await fetch(ORDER_URL, fetchSettings as RequestInit);\r\n    return await checkResponse(response);\r\n  }\r\n);\r\n\r\nexport const getOrderInfo = createAsyncThunk(\r\n  'order/getOrderInfo',\r\n  async (id: TGetOrderInfoBodyPayload): Promise<TGetOrderInfoResponse> => {\r\n    const fetchSettings = setFetchSettings('GET');\r\n    const response = await fetch(\r\n      `https://norma.nomoreparties.space/api/orders/${id}`,\r\n      fetchSettings as RequestInit\r\n    );\r\n    return await checkResponse(response);\r\n  }\r\n);\r\n\r\nconst orderSlice = createSlice({\r\n  name: 'order',\r\n  initialState,\r\n  reducers: {\r\n    setOrderElementsIds(state, action: PayloadAction<Array<string>>) {\r\n      state.constructorElementsIds = action.payload;\r\n    },\r\n    resetOrder(state) {\r\n      state.order = null;\r\n    },\r\n    closeOrderModal(state) {\r\n      state.isOrderModalOpened = false;\r\n    },\r\n  },\r\n  extraReducers: (builder) =>\r\n    builder\r\n      .addCase(createOrder.pending, (state) => {\r\n        state.isLoading = true;\r\n      })\r\n      .addCase(createOrder.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.orderId = action.payload.order.number;\r\n        state.isOrderModalOpened = true;\r\n      })\r\n      .addCase(createOrder.rejected, (state) => {\r\n        state.orderId = null;\r\n        state.isLoading = false;\r\n      })\r\n      .addCase(getOrderInfo.pending, (state) => {\r\n        state.isLoading = true;\r\n      })\r\n      .addCase(getOrderInfo.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.order = action.payload.orders[0];\r\n      })\r\n      .addCase(getOrderInfo.rejected, (state) => {\r\n        state.order = null;\r\n        state.isLoading = false;\r\n      }),\r\n});\r\n\r\nexport default orderSlice.reducer;\r\nexport const { closeOrderModal, setOrderElementsIds, resetOrder } = orderSlice.actions;\r\n","import { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nimport { INGREDIENTS_URL } from '../../../constants/api';\r\nimport { createOrder } from '../order/order';\r\nimport { checkResponse } from '../../../utils';\r\nimport { TBurgerState, TGetIngredientsRequestResponse, TIngredient } from './types';\r\n\r\nexport const initialState: TBurgerState = {\r\n  ingredients: [],\r\n  bun: null,\r\n  constructorIngredients: [],\r\n  isLoading: false,\r\n  hasError: false,\r\n};\r\n\r\nexport const getIngredients = createAsyncThunk(\r\n  'burger/getIngredients',\r\n  async (): Promise<TGetIngredientsRequestResponse> => {\r\n    const response = await fetch(INGREDIENTS_URL);\r\n    return await checkResponse(response);\r\n  }\r\n);\r\n\r\nexport const burgerSlice = createSlice({\r\n  name: 'burger',\r\n  initialState,\r\n  reducers: {\r\n    addConstructorBun(state, action: PayloadAction<TIngredient>) {\r\n      state.bun = action.payload;\r\n    },\r\n    addConstructorIngredient: {\r\n      reducer: (state, action: PayloadAction<TIngredient>) => {\r\n        state.constructorIngredients.push(action.payload);\r\n      },\r\n      prepare: (ingredient: TIngredient) => {\r\n        return {\r\n          payload: {\r\n            ...ingredient,\r\n            constructorIngredientId: uuidv4(),\r\n          },\r\n        };\r\n      },\r\n    },\r\n    deleteConstructorIngredient(state, action: PayloadAction<string>) {\r\n      state.constructorIngredients = state.constructorIngredients.filter(\r\n        (ingredient) => ingredient.constructorIngredientId !== action.payload\r\n      );\r\n    },\r\n    moveConstructorItem(state, action: PayloadAction<{ dragIndex: number; hoverIndex: number }>) {\r\n      const arr = [...state.constructorIngredients];\r\n      const dragItem = arr[action.payload.dragIndex];\r\n      const hoverItem = arr[action.payload.hoverIndex];\r\n      arr[action.payload.hoverIndex] = dragItem;\r\n      arr[action.payload.dragIndex] = hoverItem;\r\n\r\n      state.constructorIngredients = arr;\r\n    },\r\n  },\r\n  extraReducers(builder) {\r\n    builder\r\n      .addCase(getIngredients.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.hasError = false;\r\n      })\r\n      .addCase(getIngredients.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.hasError = false;\r\n        state.ingredients = action.payload.data;\r\n      })\r\n      .addCase(getIngredients.rejected, (state) => {\r\n        state.isLoading = false;\r\n        state.hasError = true;\r\n        state.ingredients = [];\r\n      })\r\n      .addCase(createOrder.fulfilled, (state) => {\r\n        state.bun = null;\r\n        state.constructorIngredients = [];\r\n      });\r\n  },\r\n});\r\n\r\nexport default burgerSlice.reducer;\r\nexport const {\r\n  addConstructorBun,\r\n  addConstructorIngredient,\r\n  deleteConstructorIngredient,\r\n  moveConstructorItem,\r\n} = burgerSlice.actions;\r\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\n\r\nimport { RESET_PASSWORD_URL, SEND_RESET_PASSWORD_EMAIL_URL } from '../../../constants/api';\r\nimport { checkResponse, setFetchSettings } from '../../../utils';\r\nimport {\r\n  TPasswordState,\r\n  TResetPasswordEmailBodyPayload,\r\n  TResetPasswordResponse,\r\n  TSendResetPasswordEmailBodyPayload,\r\n  TSendResetPasswordResponse,\r\n} from './types';\r\n\r\nexport const initialState: TPasswordState = {\r\n  isResetEmailSent: false,\r\n  isPasswordReset: false,\r\n  isLoading: false,\r\n};\r\n\r\nexport const sendResetPasswordEmail = createAsyncThunk(\r\n  'password/sendResetPasswordEmail',\r\n  async (payload: TSendResetPasswordEmailBodyPayload): Promise<TSendResetPasswordResponse> => {\r\n    const fetchSettings = setFetchSettings('POST', '', payload);\r\n    const response = await fetch(SEND_RESET_PASSWORD_EMAIL_URL, fetchSettings as RequestInit);\r\n    return await checkResponse(response);\r\n  }\r\n);\r\n\r\nexport const resetPassword = createAsyncThunk(\r\n  'password/reset',\r\n  async (payload: TResetPasswordEmailBodyPayload): Promise<TResetPasswordResponse> => {\r\n    const fetchSettings = setFetchSettings('POST', '', payload);\r\n    const response = await fetch(RESET_PASSWORD_URL, fetchSettings as RequestInit);\r\n    return await checkResponse(response);\r\n  }\r\n);\r\n\r\nconst passwordSlice = createSlice({\r\n  name: 'password',\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: (builder) =>\r\n    builder\r\n      .addCase(sendResetPasswordEmail.pending, (state) => {\r\n        state.isLoading = true;\r\n      })\r\n      .addCase(sendResetPasswordEmail.fulfilled, (state) => {\r\n        state.isResetEmailSent = true;\r\n        state.isLoading = false;\r\n      })\r\n      .addCase(sendResetPasswordEmail.rejected, (state) => {\r\n        state.isLoading = false;\r\n      })\r\n      .addCase(resetPassword.pending, (state) => {\r\n        state.isLoading = true;\r\n      })\r\n      .addCase(resetPassword.fulfilled, (state) => {\r\n        state.isPasswordReset = true;\r\n        state.isLoading = false;\r\n      })\r\n      .addCase(resetPassword.rejected, (state) => {\r\n        state.isLoading = false;\r\n      }),\r\n});\r\n\r\nexport default passwordSlice.reducer;\r\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\n\r\nimport { REFRESH_TOKEN_URL, USER_INFO_URL } from '../../../constants/api';\r\nimport { getCookie, setCookies } from '../../../utils/cookie';\r\nimport { checkResponse, setFetchSettings } from '../../../utils';\r\nimport {\r\n  TGetUserInfoRequestResponse,\r\n  TRefreshTokenRequestBodyPayload,\r\n  TRefreshTokenRequestResponse,\r\n  TUpdateUserInfoRequestBodyPayload,\r\n  TUpdateUserInfoRequestResponse,\r\n  TUserState,\r\n} from './types';\r\n\r\nexport const initialState: TUserState = {\r\n  isLoggedIn: !!getCookie('accessToken'),\r\n  user: null,\r\n  isLoading: false,\r\n};\r\n\r\nconst fetchWithRefresh = async (url: string, fetchSettings: RequestInit) => {\r\n  try {\r\n    const response = await fetch(url, fetchSettings);\r\n    return await checkResponse(response);\r\n  } catch (err) {\r\n    if (err.message === 'jwt expired') {\r\n      const refreshData = await refreshTokenRequest();\r\n      setCookies(refreshData);\r\n\r\n      const response = await fetch(url, fetchSettings);\r\n      return await checkResponse(response);\r\n    } else {\r\n      return Promise.reject(err);\r\n    }\r\n  }\r\n};\r\n\r\nconst refreshTokenRequest = async (): Promise<TRefreshTokenRequestResponse> => {\r\n  const fetchSettings = setFetchSettings('POST', getCookie('refreshToken'), {\r\n    token: getCookie('refreshToken'),\r\n  } as TRefreshTokenRequestBodyPayload);\r\n  const response = await fetch(REFRESH_TOKEN_URL, fetchSettings as RequestInit);\r\n  return await checkResponse(response);\r\n};\r\n\r\nexport const getUserInfoRequest = createAsyncThunk(\r\n  'user/getUserInfoRequest',\r\n  async (): Promise<TGetUserInfoRequestResponse> => {\r\n    const fetchSettings = setFetchSettings('GET', `Bearer ${getCookie('accessToken')}`);\r\n    return await fetchWithRefresh(USER_INFO_URL, fetchSettings as RequestInit);\r\n  }\r\n);\r\n\r\nexport const updateUserInfoRequest = createAsyncThunk(\r\n  'user/updateUserInfoRequest',\r\n  async (payload: TUpdateUserInfoRequestBodyPayload): Promise<TUpdateUserInfoRequestResponse> => {\r\n    const fetchSettings = setFetchSettings('PATCH', `Bearer ${getCookie('accessToken')}`, payload);\r\n    return await fetchWithRefresh(USER_INFO_URL, fetchSettings as RequestInit);\r\n  }\r\n);\r\n\r\nconst userSlice = createSlice({\r\n  name: 'user',\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: (builder) =>\r\n    builder\r\n      .addCase(getUserInfoRequest.pending, (state) => {\r\n        state.isLoading = true;\r\n      })\r\n      .addCase(getUserInfoRequest.fulfilled, (state, action) => {\r\n        state.user = action.payload.user;\r\n        state.isLoggedIn = true;\r\n        state.isLoading = false;\r\n      })\r\n      .addCase(getUserInfoRequest.rejected, (state) => {\r\n        state.isLoading = false;\r\n      })\r\n      .addCase(updateUserInfoRequest.pending, (state) => {\r\n        state.isLoading = true;\r\n      })\r\n      .addCase(updateUserInfoRequest.fulfilled, (state, action) => {\r\n        state.user = action.payload.user;\r\n        state.isLoggedIn = true;\r\n        state.isLoading = false;\r\n      })\r\n      .addCase(updateUserInfoRequest.rejected, (state) => {\r\n        state.isLoading = false;\r\n      }),\r\n});\r\n\r\nexport default userSlice.reducer;\r\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\n\r\nimport { LOGIN_URL, LOGOUT_URL, REGISTER_URL } from '../../../constants/api';\r\nimport { deleteCookie, getCookie, setCookies } from '../../../utils/cookie';\r\nimport { checkResponse, setFetchSettings } from '../../../utils';\r\nimport {\r\n  TAuthState,\r\n  TLoginRequestBodyPayload,\r\n  TLoginRequestResponse,\r\n  TLogoutRequestBodyPayload,\r\n  TLogoutResponse,\r\n  TRegisterRequestBodyPayload,\r\n  TRegisterRequestResponse,\r\n} from './types';\r\n\r\nexport const initialState: TAuthState = {\r\n  isLoggedIn: !!getCookie('accessToken'),\r\n  user: null,\r\n  isLoading: false,\r\n};\r\n\r\nexport const registerRequest = createAsyncThunk(\r\n  'auth/registerRequest',\r\n  async (payload: TRegisterRequestBodyPayload): Promise<TRegisterRequestResponse> => {\r\n    const fetchSettings = setFetchSettings('POST', '', payload);\r\n    const response = await fetch(REGISTER_URL, fetchSettings as RequestInit);\r\n    return await checkResponse(response);\r\n  }\r\n);\r\n\r\nexport const loginRequest = createAsyncThunk(\r\n  'auth/loginRequest',\r\n  async (payload: TLoginRequestBodyPayload): Promise<TLoginRequestResponse> => {\r\n    const fetchSettings = setFetchSettings('POST', '', payload);\r\n    const response = await fetch(LOGIN_URL, fetchSettings as RequestInit);\r\n    return await checkResponse(response);\r\n  }\r\n);\r\n\r\nexport const logoutRequest = createAsyncThunk('auth/logoutRequest', async (): Promise<TLogoutResponse> => {\r\n  const fetchSettings = setFetchSettings('POST', '', {\r\n    token: getCookie('refreshToken'),\r\n  } as TLogoutRequestBodyPayload);\r\n  const response = await fetch(LOGOUT_URL, fetchSettings as RequestInit);\r\n  return await checkResponse(response);\r\n});\r\n\r\nconst authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: (builder) =>\r\n    builder\r\n      .addCase(registerRequest.pending, (state) => {\r\n        state.isLoading = true;\r\n      })\r\n      .addCase(registerRequest.fulfilled, (state, action) => {\r\n        setCookies(action.payload);\r\n        state.isLoggedIn = true;\r\n        state.isLoading = false;\r\n      })\r\n      .addCase(registerRequest.rejected, (state) => {\r\n        state.isLoading = false;\r\n      })\r\n      .addCase(loginRequest.pending, (state) => {\r\n        state.isLoading = true;\r\n      })\r\n      .addCase(loginRequest.fulfilled, (state, action) => {\r\n        setCookies(action.payload);\r\n        state.user = action.payload.user;\r\n        state.isLoggedIn = true;\r\n        state.isLoading = false;\r\n      })\r\n      .addCase(loginRequest.rejected, (state) => {\r\n        state.isLoading = false;\r\n      })\r\n      .addCase(logoutRequest.pending, (state) => {\r\n        state.isLoading = true;\r\n      })\r\n      .addCase(logoutRequest.fulfilled, (state) => {\r\n        deleteCookie('accessToken');\r\n        deleteCookie('refreshToken');\r\n        state.user = null;\r\n        state.isLoggedIn = false;\r\n        state.isLoading = false;\r\n      })\r\n      .addCase(logoutRequest.rejected, (state) => {\r\n        state.isLoading = false;\r\n      }),\r\n});\r\n\r\nexport default authSlice.reducer;\r\n","import { createAction, createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { TFeedState } from './types';\r\n\r\nexport const WS_CONNECTION_START = createAction<string>('WS_CONNECTION_START');\r\nexport const WS_CONNECTION_CLOSE = createAction<string | undefined>('WS_CONNECTION_CLOSE');\r\n\r\nexport const initialState: TFeedState = {\r\n  orders: [],\r\n  total: 0,\r\n  totalToday: 0,\r\n  wsConnected: false,\r\n  error: false,\r\n};\r\n\r\nexport const ordersFeed = createSlice({\r\n  name: 'ordersFeed',\r\n  initialState,\r\n  reducers: {\r\n    wsConnectionOpened: (state) => {\r\n      state.wsConnected = true;\r\n      state.error = false;\r\n    },\r\n    wsConnectionClosed: (state) => {\r\n      state.wsConnected = false;\r\n      state.error = false;\r\n    },\r\n    wsConnectionError: (state) => {\r\n      state.wsConnected = false;\r\n      state.error = true;\r\n    },\r\n    wsGetMessage: (state, action: PayloadAction<TFeedState>) => {\r\n      const { orders, total, totalToday } = action.payload;\r\n      state.orders = orders;\r\n      state.total = total;\r\n      state.totalToday = totalToday;\r\n    },\r\n  },\r\n});\r\n\r\nexport default ordersFeed.reducer;\r\nexport const { wsConnectionOpened, wsConnectionError, wsConnectionClosed, wsGetMessage } = ordersFeed.actions;\r\n","import { combineReducers } from '@reduxjs/toolkit';\r\n\r\nimport burgerReducer from './slices/burger/burger';\r\nimport orderReducer from './slices/order/order';\r\nimport passwordReducer from './slices/password/password';\r\nimport userReducer from './slices/user/user';\r\nimport authReducer from './slices/auth/auth';\r\nimport feedReducer from './slices/feed/feed';\r\n\r\nconst rootReducer = combineReducers({\r\n  burger: burgerReducer,\r\n  order: orderReducer,\r\n  password: passwordReducer,\r\n  auth: authReducer,\r\n  user: userReducer,\r\n  feed: feedReducer,\r\n});\r\n\r\nexport default rootReducer;\r\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\r\nimport { Middleware } from 'redux';\r\nimport { TypedUseSelectorHook, useSelector as selectorHook, useDispatch as dispatchHook } from 'react-redux';\r\nimport { ThunkMiddleware } from 'redux-thunk';\r\n\r\nimport rootReducer from './root-reducer';\r\nimport { socketMiddleware } from './middleware/socket';\r\n\r\ntype RootState = ReturnType<typeof rootReducer>;\r\n\r\nconst middleware: Array<Middleware<{}, RootState> | ThunkMiddleware<RootState>> = [\r\n  socketMiddleware(),\r\n  ...getDefaultMiddleware<RootState>(),\r\n];\r\n\r\nconst store = configureStore({\r\n  reducer: rootReducer,\r\n  middleware,\r\n  devTools: process.env.NODE_ENV !== 'production',\r\n});\r\n\r\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;\r\nexport const useDispatch = () => dispatchHook<typeof store.dispatch>();\r\n\r\nexport default store;\r\n","import {\r\n  WS_CONNECTION_CLOSE,\r\n  WS_CONNECTION_START,\r\n  wsConnectionClosed,\r\n  wsConnectionError,\r\n  wsConnectionOpened,\r\n  wsGetMessage,\r\n} from '../slices/feed/feed';\r\nimport { AnyAction, MiddlewareAPI } from 'redux';\r\n\r\nexport const socketMiddleware = () => {\r\n  return (store: MiddlewareAPI) => {\r\n    let socket: WebSocket | null = null;\r\n\r\n    return (next: (a: AnyAction) => void) => (action: AnyAction) => {\r\n      const { dispatch } = store;\r\n      const { type, payload } = action;\r\n\r\n      if (type === WS_CONNECTION_START.toString()) socket = new WebSocket(payload);\r\n      if (type === WS_CONNECTION_CLOSE.toString()) socket && socket.close();\r\n\r\n      if (socket) {\r\n        socket.onopen = () => dispatch(wsConnectionOpened());\r\n        socket.onclose = () => dispatch(wsConnectionClosed());\r\n        socket.onerror = () => dispatch(wsConnectionError());\r\n        socket.onmessage = (event) => dispatch(wsGetMessage(JSON.parse(event.data)));\r\n      }\r\n\r\n      next(action);\r\n    };\r\n  };\r\n};\r\n","import React, { FC, useEffect } from 'react';\r\n\r\nimport styles from './tabs.module.scss';\r\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\ninterface ITabsProps {\r\n  inViewBuns: boolean;\r\n  inViewSauces: boolean;\r\n  inViewMains: boolean;\r\n}\r\n\r\nconst Tabs: FC<ITabsProps> = ({ inViewBuns, inViewSauces, inViewMains }) => {\r\n  const [current, setCurrent] = React.useState('Булки');\r\n\r\n  const setTab = (value: string, id: string) => {\r\n    setCurrent(value);\r\n    const element = document.getElementById(id);\r\n    if (element) element.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (inViewBuns) {\r\n      setCurrent('Булки');\r\n    } else if (inViewSauces) {\r\n      setCurrent('Соусы');\r\n    } else if (inViewMains) {\r\n      setCurrent('Начинки');\r\n    }\r\n  }, [inViewBuns, inViewMains, inViewSauces]);\r\n\r\n  return (\r\n    <div className={`${styles.tabs}  mb-10`}>\r\n      <Tab value=\"Булки\" active={current === 'Булки'} onClick={() => setTab('Булки', 'buns')}>\r\n        Булки\r\n      </Tab>\r\n      <Tab value=\"Соусы\" active={current === 'Соусы'} onClick={() => setTab('Соусы', 'sauces')}>\r\n        Соусы\r\n      </Tab>\r\n      <Tab value=\"Начинки\" active={current === 'Начинки'} onClick={() => setTab('Начинки', 'main')}>\r\n        Начинки\r\n      </Tab>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Tabs;\r\n","import React, { FC, useMemo } from 'react';\r\nimport { useDrag } from 'react-dnd';\r\nimport { Link, useLocation } from 'react-router-dom';\r\n\r\nimport { useSelector } from '../../../services/store';\r\nimport { TIngredient } from '../../../services/slices/burger/types';\r\n\r\nimport styles from './ingredient.module.scss';\r\nimport { Counter, CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\ninterface IIngredientProps {\r\n  ingredient: TIngredient;\r\n}\r\n\r\nconst Ingredient: FC<IIngredientProps> = ({ ingredient }) => {\r\n  const { image, price, name, _id } = ingredient;\r\n  const location = useLocation();\r\n  const { constructorIngredients, bun } = useSelector((state) => state.burger);\r\n\r\n  const counters = useMemo(() => {\r\n    const counter: { [name: string]: number } = {};\r\n\r\n    constructorIngredients.forEach((ingredient: TIngredient) => {\r\n      if (!counter[ingredient._id]) counter[ingredient._id] = 0;\r\n      counter[ingredient._id]++;\r\n    });\r\n\r\n    if (bun) counter[bun._id] = 2;\r\n\r\n    return counter;\r\n  }, [constructorIngredients, bun]);\r\n\r\n  const [{ isDragging }, dragRef] = useDrag({\r\n    type: 'ingredient',\r\n    item: { ...ingredient },\r\n    collect: (monitor) => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  });\r\n  const opacity = isDragging ? 0.25 : 1;\r\n\r\n  return (\r\n    <li className={styles.item} style={{ opacity }} ref={dragRef}>\r\n      {counters[ingredient._id] && <Counter count={counters[ingredient._id]} size=\"default\" />}\r\n\r\n      <Link className={styles.link} to={{ pathname: `/ingredients/${_id}`, state: { background: location } }}>\r\n        <>\r\n          <div className={styles.ingredient}>\r\n            <img className={styles.image} src={image} alt={name} />\r\n\r\n            <div className={styles.priceWrapper}>\r\n              <span className={styles.price}>{price}</span>\r\n              <CurrencyIcon type=\"primary\" />\r\n            </div>\r\n          </div>\r\n\r\n          <span className={styles.name}>{name}</span>\r\n        </>\r\n      </Link>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default Ingredient;\r\n","import React, { FC } from 'react';\r\n\r\nimport { TIngredient } from '../../../services/slices/burger/types';\r\n\r\nimport styles from './ingredients-list.module.scss';\r\nimport Ingredient from '../ingredient/ingredient';\r\n\r\ninterface IIngredientsListProps {\r\n  ingredients: Array<TIngredient>;\r\n}\r\n\r\nconst IngredientsList: FC<IIngredientsListProps> = ({ ingredients }) => (\r\n  <ul className={styles.list}>\r\n    {ingredients.map((ingredient) => (\r\n      <Ingredient key={ingredient._id} ingredient={ingredient} />\r\n    ))}\r\n  </ul>\r\n);\r\n\r\nexport default IngredientsList;\r\n","import React, { useMemo } from 'react';\r\nimport { useSelector } from '../../../services/store';\r\n\r\nimport { TIngredient } from '../../../services/slices/burger/types';\r\n\r\nimport IngredientsList from '../ingredients-list/ingredients-list';\r\n\r\ninterface IIngredientsGroupProps {\r\n  title: string;\r\n  type: string;\r\n  groupId: string;\r\n}\r\n\r\nconst IngredientsGroup = React.forwardRef<HTMLDivElement, IIngredientsGroupProps>(\r\n  ({ title, type, groupId }, ref) => {\r\n    const ingredients = useSelector((state) => state.burger.ingredients);\r\n    const buns = useMemo(\r\n      () => ingredients.filter((ingredient: TIngredient) => ingredient.type === 'bun'),\r\n      [ingredients]\r\n    );\r\n    const sauces = useMemo(\r\n      () => ingredients.filter((ingredient: TIngredient) => ingredient.type === 'sauce'),\r\n      [ingredients]\r\n    );\r\n    const main = useMemo(\r\n      () => ingredients.filter((ingredient: TIngredient) => ingredient.type === 'main'),\r\n      [ingredients]\r\n    );\r\n\r\n    let filteredIngredients;\r\n\r\n    switch (type) {\r\n      case 'bun':\r\n        filteredIngredients = buns;\r\n        break;\r\n      case 'sauce':\r\n        filteredIngredients = sauces;\r\n        break;\r\n      case 'main':\r\n        filteredIngredients = main;\r\n        break;\r\n      default:\r\n        filteredIngredients = [];\r\n    }\r\n\r\n    return (\r\n      <div className=\"mb-10\" id={groupId} ref={ref}>\r\n        <h2 className=\"mb-6  text  text_type_main-medium\">{title}</h2>\r\n        <IngredientsList ingredients={filteredIngredients} />\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\nexport default IngredientsGroup;\r\n","import React, { FC } from 'react';\r\nimport { useInView } from 'react-intersection-observer';\r\n\r\nimport styles from './burger-ingredients.module.scss';\r\nimport Tabs from './tabs/tabs';\r\nimport IngredientsGroup from './ingredients-group/ingredients-group';\r\n\r\nconst BurgerIngredients: FC = () => {\r\n  const [bunsRef, inViewBuns] = useInView({ threshold: 0 });\r\n  const [saucesRef, inViewSauces] = useInView({ threshold: 0 });\r\n  const [mainsRef, inViewMains] = useInView({ threshold: 0 });\r\n\r\n  return (\r\n    <section className={`${styles.content}  mt-10`}>\r\n      <h1 className=\"text  text_type_main-large  mb-5\">Соберите бургер</h1>\r\n\r\n      <Tabs inViewBuns={inViewBuns} inViewSauces={inViewSauces} inViewMains={inViewMains} />\r\n\r\n      <section className={`${styles.ingredientsWrapper}  scroll`}>\r\n        <IngredientsGroup title=\"Булки\" type=\"bun\" groupId=\"buns\" ref={bunsRef} />\r\n        <IngredientsGroup title=\"Соусы\" type=\"sauce\" groupId=\"sauces\" ref={saucesRef} />\r\n        <IngredientsGroup title=\"Начинки\" type=\"main\" groupId=\"main\" ref={mainsRef} />\r\n      </section>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default BurgerIngredients;\r\n","import React, { FC, useMemo } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from '../../../services/store';\r\n\r\nimport { createOrder } from '../../../services/slices/order/order';\r\nimport { TIngredient } from '../../../services/slices/burger/types';\r\n\r\nimport styles from './cart.module.scss';\r\nimport { Button, CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nconst Cart: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const { constructorElementsIds, isLoading } = useSelector((state) => state.order);\r\n  const { constructorIngredients, bun } = useSelector((state) => state.burger);\r\n  const isLoggedIn = useSelector((state) => state.auth.isLoggedIn);\r\n  const history = useHistory();\r\n\r\n  const totalPrice = useMemo(() => {\r\n    const bunPrice = bun ? bun.price * 2 : 0;\r\n    const ingredientsPrice = constructorIngredients\r\n      ? constructorIngredients.reduce((acc: number, el: TIngredient) => acc + el.price, 0)\r\n      : 0;\r\n    return ingredientsPrice + bunPrice;\r\n  }, [constructorIngredients, bun]);\r\n\r\n  const payload = {\r\n    ingredients: constructorElementsIds,\r\n  };\r\n\r\n  const onOrderBtnClick = () => {\r\n    isLoggedIn ? dispatch(createOrder(payload)) : history.replace('/login');\r\n  };\r\n\r\n  const orderBtn = (\r\n    <Button type=\"primary\" size=\"large\" onClick={onOrderBtnClick}>\r\n      Оформить заказ\r\n    </Button>\r\n  );\r\n\r\n  return (\r\n    <section className={styles.totalWrapper}>\r\n      <div className={styles.priceWrapper}>\r\n        <span className={styles.price}>{totalPrice}</span>\r\n        <CurrencyIcon type=\"primary\" />\r\n      </div>\r\n      {isLoading ? <span className={styles.loader}>Оформляем заказ</span> : bun && orderBtn}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n","import React, { FC, useRef } from 'react';\r\nimport { useDispatch } from '../../../services/store';\r\nimport { DropTargetMonitor, useDrag, useDrop, XYCoord } from 'react-dnd';\r\n\r\nimport { deleteConstructorIngredient, moveConstructorItem } from '../../../services/slices/burger/burger';\r\n\r\nimport styles from './burger-element.module.scss';\r\nimport { ConstructorElement, DragIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\ninterface IBurgerElement {\r\n  isLocked?: boolean;\r\n  draggable: boolean;\r\n  text: string;\r\n  thumbnail: string;\r\n  price: number;\r\n  id?: string;\r\n  idx: number;\r\n}\r\n\r\nconst BurgerElement: FC<IBurgerElement> = ({ isLocked, draggable, text, thumbnail, price, id, idx }) => {\r\n  const dispatch = useDispatch();\r\n  const ref = useRef<HTMLLIElement>(null);\r\n\r\n  interface DragItem {\r\n    idx: number;\r\n    id: string;\r\n    type: string;\r\n  }\r\n\r\n  const [{ isDragging }, dragRef] = useDrag({\r\n    type: 'constructor',\r\n    item: { idx },\r\n    collect: (monitor) => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  });\r\n\r\n  const [{ handlerId }, dropRef] = useDrop({\r\n    accept: 'constructor',\r\n    collect(monitor) {\r\n      return {\r\n        handlerId: monitor.getHandlerId(),\r\n      };\r\n    },\r\n    hover(item: DragItem, monitor: DropTargetMonitor) {\r\n      if (!ref.current) {\r\n        return;\r\n      }\r\n\r\n      const dragIndex = item.idx;\r\n      const hoverIndex = idx;\r\n\r\n      if (dragIndex === hoverIndex) {\r\n        return;\r\n      }\r\n\r\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\r\n      const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\r\n      const clientOffset = monitor.getClientOffset();\r\n      const hoverClientY = (clientOffset as XYCoord).y - hoverBoundingRect.top;\r\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n        return;\r\n      }\r\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n        return;\r\n      }\r\n\r\n      dispatch(moveConstructorItem({ dragIndex, hoverIndex }));\r\n\r\n      item.idx = hoverIndex;\r\n    },\r\n  });\r\n\r\n  dragRef(dropRef(ref));\r\n\r\n  const opacity = isDragging ? 0.25 : 1;\r\n  const onDeleteIngredientClick = () => id && dispatch(deleteConstructorIngredient(id));\r\n\r\n  return (\r\n    <li\r\n      className={`${styles.element} ${draggable ? styles.draggable : styles.fixed}`}\r\n      style={{ opacity }}\r\n      ref={ref}\r\n      data-handler-id={handlerId}\r\n    >\r\n      {draggable && (\r\n        <span className=\"mr-2\">\r\n          <DragIcon type=\"primary\" />\r\n        </span>\r\n      )}\r\n\r\n      <ConstructorElement\r\n        isLocked={isLocked}\r\n        text={text}\r\n        thumbnail={thumbnail}\r\n        price={price}\r\n        handleClose={onDeleteIngredientClick}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default BurgerElement;\r\n","import React, { FC, useEffect } from 'react';\r\nimport { useDrop } from 'react-dnd';\r\n\r\nimport { addConstructorBun, addConstructorIngredient } from '../../../services/slices/burger/burger';\r\nimport { setOrderElementsIds } from '../../../services/slices/order/order';\r\nimport { useDispatch, useSelector } from '../../../services/store';\r\nimport { TIngredient } from '../../../services/slices/burger/types';\r\n\r\nimport styles from './ingredients-list.module.scss';\r\nimport BurgerElement from '../burger-element/burger-element';\r\nimport { ConstructorElement } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nconst IngredientsList: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const { constructorIngredients, bun } = useSelector((state) => state.burger);\r\n\r\n  useEffect(() => {\r\n    const order = constructorIngredients.map((ingredient: TIngredient) => ingredient._id);\r\n    bun && order.push(bun._id);\r\n    order.length && dispatch(setOrderElementsIds(order));\r\n  }, [dispatch, constructorIngredients, bun]);\r\n\r\n  const handleDrop = (item: TIngredient) => {\r\n    if (item.type === 'bun') {\r\n      dispatch(addConstructorBun(item));\r\n    } else {\r\n      dispatch(addConstructorIngredient(item));\r\n    }\r\n  };\r\n\r\n  const [{ isHover }, dropTarget] = useDrop({\r\n    accept: 'ingredient',\r\n    collect: (monitor) => ({\r\n      isHover: monitor.isOver(),\r\n    }),\r\n    drop(item: TIngredient) {\r\n      handleDrop(item);\r\n    },\r\n  });\r\n\r\n  const backgroundColor = isHover && 'rgba(133, 133, 173, 0.5)';\r\n\r\n  const burgerElementsList = constructorIngredients.map((ingredient: TIngredient, index: number) => {\r\n    const { constructorIngredientId, name, image, price } = ingredient;\r\n    return (\r\n      <BurgerElement\r\n        key={constructorIngredientId}\r\n        draggable={true}\r\n        text={name}\r\n        thumbnail={image}\r\n        price={price}\r\n        id={constructorIngredientId}\r\n        idx={index}\r\n      />\r\n    );\r\n  });\r\n\r\n  const constructorContent =\r\n    bun || constructorIngredients.length ? (\r\n      <>\r\n        {bun && (\r\n          <div className={styles.bun}>\r\n            <ConstructorElement\r\n              type=\"top\"\r\n              isLocked={true}\r\n              text={`${bun.name} (верх)`}\r\n              thumbnail={bun.image}\r\n              price={bun.price}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        <ul className={`${styles.ingredientsWrapper}  ${styles.scrollHeight}  scroll  pr-2`}>\r\n          {burgerElementsList}\r\n        </ul>\r\n\r\n        {bun && (\r\n          <div className={styles.bun}>\r\n            <ConstructorElement\r\n              type=\"bottom\"\r\n              isLocked={true}\r\n              text={`${bun.name} (низ)`}\r\n              thumbnail={bun.image}\r\n              price={bun.price}\r\n            />\r\n          </div>\r\n        )}\r\n      </>\r\n    ) : (\r\n      <h2 className={styles.title}>Перетащите ингредиенты в эту область</h2>\r\n    );\r\n\r\n  return (\r\n    <section\r\n      className={`${styles.ingredientsWrapper}  ${styles.fixedHeight}  mb-10`}\r\n      style={{ backgroundColor } as React.CSSProperties}\r\n      ref={dropTarget}\r\n    >\r\n      {constructorContent}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default IngredientsList;\r\n","import React, { FC } from 'react';\r\nimport { useSelector } from '../../services/store';\r\n\r\nimport styles from './burger-constructor.module.scss';\r\nimport Cart from './cart/cart';\r\nimport IngredientsList from './ingredients-list/ingredients-list';\r\n\r\nconst BurgerConstructor: FC = () => {\r\n  const { constructorIngredients, bun } = useSelector((state) => state.burger);\r\n\r\n  return (\r\n    <div className={styles.content}>\r\n      <IngredientsList />\r\n      {bun || constructorIngredients.length ? <Cart /> : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BurgerConstructor;\r\n","import React, { FC } from 'react';\r\nimport { DndProvider } from 'react-dnd';\r\nimport { HTML5Backend } from 'react-dnd-html5-backend';\r\n\r\nimport styles from './constructor-content.module.scss';\r\nimport BurgerIngredients from '../burger-ingredients/burger-ingredients';\r\nimport BurgerConstructor from '../burger-constructor/burger-constructor';\r\n\r\nconst ConstructorContent: FC = () => (\r\n  <main className={`${styles.main}  pl-5  pr-5`}>\r\n    <DndProvider backend={HTML5Backend}>\r\n      <BurgerIngredients />\r\n      <BurgerConstructor />\r\n    </DndProvider>\r\n  </main>\r\n);\r\n\r\nexport default ConstructorContent;\r\n","import React, { FC } from 'react';\r\n\r\nconst Error: FC = () => (\r\n  <h1 className=\"text_centered  text  text_type_main-large  mt-30\">Что-то пошло не так :(</h1>\r\n);\r\n\r\nexport default Error;\r\n","import React, { FC } from 'react';\r\n\r\nimport styles from './modal-overlay.module.scss';\r\n\r\ninterface IModalOverlayProps {\r\n  onModalClose: () => void;\r\n}\r\n\r\nconst ModalOverlay: FC<IModalOverlayProps> = ({ onModalClose }) => (\r\n  <div className={styles.overlay} onClick={onModalClose} />\r\n);\r\n\r\nexport default ModalOverlay;\r\n","import React, { FC, useEffect } from 'react';\r\nimport { createPortal } from 'react-dom';\r\n\r\nimport styles from './modal.module.scss';\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport ModalOverlay from '../modal-overlay/modal-overlay';\r\n\r\nconst modalRoot = document.getElementById('modals');\r\nconst KEY_ESC = 'Escape';\r\n\r\ninterface IModalProps {\r\n  title?: string;\r\n  orderNumber?: number;\r\n  onModalClose: () => void;\r\n}\r\n\r\nconst Modal: FC<IModalProps> = ({ title = '', orderNumber = '', children, onModalClose }) => {\r\n  useEffect(() => {\r\n    const onEscPress = (e: KeyboardEvent) => {\r\n      if (e.key === KEY_ESC) onModalClose();\r\n    };\r\n\r\n    document.addEventListener('keydown', onEscPress);\r\n\r\n    return () => document.removeEventListener('keydown', onEscPress);\r\n  }, [onModalClose]);\r\n\r\n  return (\r\n    modalRoot &&\r\n    createPortal(\r\n      <div className={styles.wrapper}>\r\n        <section className={`${styles.modal}  ${title !== '' ? 'pb-15' : 'pt-15  pb-30'}  p-10`}>\r\n          <div className={`${styles.header}  ${title !== '' ? 'pt-3  pb-3' : 'mb-9'}`}>\r\n            {title && <h2 className={`${styles.title}  text  text_type_main-large`}>{title}</h2>}\r\n            {orderNumber && (\r\n              <h2 className={`${styles.title}  text  text_type_digits-default`}>#{orderNumber}</h2>\r\n            )}\r\n            <span className={styles.icon} onClick={onModalClose}>\r\n              <CloseIcon type=\"primary\" />\r\n            </span>\r\n          </div>\r\n\r\n          {children}\r\n        </section>\r\n\r\n        <ModalOverlay onModalClose={onModalClose} />\r\n      </div>,\r\n      modalRoot\r\n    )\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","export default __webpack_public_path__ + \"static/media/done.e036971b.png\";","import React, { FC } from 'react';\r\n\r\nimport styles from './order-details.module.scss';\r\nimport done from '../../images/done.png';\r\n\r\ninterface IOrderDetailsProps {\r\n  orderId: number;\r\n}\r\n\r\nconst OrderDetails: FC<IOrderDetailsProps> = ({ orderId }) => (\r\n  <section>\r\n    <h2 className={`${styles.title}  mb-4  text  text_type_digits-large`}>{orderId}</h2>\r\n    <span className={`${styles.titleText}  mb-15  text  text_type_main-medium`}>идентификатор заказа</span>\r\n    <img className={`${styles.icon}  mb-15`} src={done} alt=\"order done\" width={120} height={120} />\r\n    <span className={`${styles.text}  text  text_type_main-default  mb-2`}>Ваш заказ начали готовить</span>\r\n    <span className={`${styles.text}  text  text_type_main-default  text_color_inactive`}>\r\n      Дождитесь готовности на орбитальной станции\r\n    </span>\r\n  </section>\r\n);\r\n\r\nexport default OrderDetails;\r\n","import React, { FC } from 'react';\r\nimport { useDispatch, useSelector } from '../../services/store';\r\n\r\nimport { closeOrderModal } from '../../services/slices/order/order';\r\n\r\nimport ConstructorContent from '../../components/constructor-content/constructor-content';\r\nimport Error from '../../components/error/error';\r\nimport Modal from '../../components/modal/modal';\r\nimport OrderDetails from '../../components/order-details/order-details';\r\n\r\nexport const Constructor: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const { orderId, isOrderModalOpened } = useSelector((state) => state.order);\r\n  const { hasError, isLoading } = useSelector((state) => state.burger);\r\n\r\n  const onOrderModalClose = () => dispatch(closeOrderModal());\r\n\r\n  const content = hasError ? <Error /> : <ConstructorContent />;\r\n\r\n  return (\r\n    <>\r\n      {!isLoading && content}\r\n\r\n      {isOrderModalOpened && orderId && (\r\n        <Modal onModalClose={onOrderModalClose}>\r\n          <OrderDetails orderId={orderId} />\r\n        </Modal>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import React, { FC, useMemo } from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport { useSelector } from '../../services/store';\r\n\r\nimport { getDateTime } from '../../utils';\r\nimport { TOrderObject } from '../../services/slices/feed/types';\r\nimport { TIngredient } from '../../services/slices/burger/types';\r\n\r\nimport styles from './feed-item.module.scss';\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nexport const FeedItem: FC<TOrderObject> = ({\r\n  _id,\r\n  number,\r\n  name,\r\n  ingredients: orderIngredients,\r\n  createdAt,\r\n}) => {\r\n  const location = useLocation();\r\n  const { ingredients } = useSelector((state) => state.burger);\r\n\r\n  const time = getDateTime(createdAt);\r\n\r\n  const feedOrderIngredients = useMemo(() => {\r\n    return ingredients.filter((ingredient: TIngredient) => orderIngredients.includes(ingredient._id));\r\n  }, [orderIngredients, ingredients]);\r\n\r\n  const showImages = (feedOrderIngredients: Array<TIngredient>) => {\r\n    const images = [];\r\n\r\n    for (let i = 0; i < feedOrderIngredients.length; i++) {\r\n      const ing = feedOrderIngredients[i];\r\n\r\n      if (feedOrderIngredients.length > 5 && i === 5) {\r\n        images.push(\r\n          <li className={styles.imagesItem} key={ing._id}>\r\n            <img className={styles.image} src={ing.image_mobile} alt={ing.name} width=\"64\" height=\"64\" />\r\n            <span className={styles.count}>+{feedOrderIngredients.length - 5}</span>\r\n          </li>\r\n        );\r\n      } else {\r\n        images.push(\r\n          <li className={styles.imagesItem} key={ing._id}>\r\n            <img className={styles.image} src={ing.image_mobile} alt={ing.name} width=\"64\" height=\"64\" />\r\n          </li>\r\n        );\r\n      }\r\n    }\r\n\r\n    return images;\r\n  };\r\n\r\n  const price = useMemo(() => {\r\n    return feedOrderIngredients.reduce(\r\n      (acc: number, el: TIngredient) => (el.type === 'bun' ? acc + el.price * 2 : acc + el.price),\r\n      0\r\n    );\r\n  }, [feedOrderIngredients]);\r\n\r\n  return (\r\n    <>\r\n      {feedOrderIngredients.length && price && (\r\n        <li>\r\n          <Link\r\n            className={styles.item}\r\n            to={{\r\n              pathname: location.pathname === '/feed' ? `/feed/${number}` : `/profile/orders/${number}`,\r\n              state: { background: location },\r\n            }}\r\n          >\r\n            <div className={`${styles.flexWrapper}  mb-6`}>\r\n              <span className={styles.order}>#{number}</span>\r\n              <span className={styles.datetime}>{time}</span>\r\n            </div>\r\n\r\n            <span className={styles.name}>{name}</span>\r\n\r\n            <div className={styles.flexWrapper}>\r\n              <ul className={styles.images}>{showImages(feedOrderIngredients)}</ul>\r\n\r\n              <div className={styles.priceWrapper}>\r\n                <span className={styles.price}>{price}</span>\r\n                <CurrencyIcon type=\"primary\" />\r\n              </div>\r\n            </div>\r\n          </Link>\r\n        </li>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import React, { FC } from 'react';\r\nimport { useSelector } from '../../services/store';\r\n\r\nimport styles from './feed-list.module.scss';\r\nimport { FeedItem } from '../feed-item/feed-item';\r\n\r\nexport const FeedList: FC = () => {\r\n  const orders = useSelector((state) => state.feed.orders);\r\n\r\n  return (\r\n    orders && (\r\n      <ul className={`${styles.list}  scroll`}>\r\n        {orders.map((order) => (\r\n          <FeedItem key={order._id} {...order} />\r\n        ))}\r\n      </ul>\r\n    )\r\n  );\r\n};\r\n","import React, { FC } from 'react';\r\nimport { useSelector } from '../../services/store';\r\n\r\nimport { TOrderObject } from '../../services/slices/feed/types';\r\n\r\nimport styles from './feed-stats.module.scss';\r\n\r\nexport const FeedStats: FC = () => {\r\n  const { total, totalToday, orders } = useSelector((state) => state.feed);\r\n  const doneOrders: Array<TOrderObject> = [];\r\n  const inProgressOrders: Array<TOrderObject> = [];\r\n\r\n  orders\r\n    .slice(0, 20)\r\n    .forEach((el) => (el.status === 'done' ? doneOrders.push(el) : inProgressOrders.push(el)));\r\n\r\n  return (\r\n    <section className={styles.feedStats}>\r\n      <div className={styles.flexWrapper}>\r\n        <div className={styles.orderNumbers}>\r\n          <span className={styles.orderStatus}>Готовы:</span>\r\n          <ul className={styles.list}>\r\n            {doneOrders.map(({ _id, number }) => (\r\n              <li key={_id} className={`${styles.digits} ${styles.textGreen}`}>\r\n                {number}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n        <div className={styles.orderNumbers}>\r\n          <span className={styles.orderStatus}>В работе:</span>\r\n          <ul className={styles.list}>\r\n            {inProgressOrders.map(({ _id, number }) => (\r\n              <li key={_id} className={styles.digits}>\r\n                {number}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={styles.totalWrapper}>\r\n        <span className={styles.totalTitle}>Выполнено за все время:</span>\r\n        <span className={`${styles.digits} ${styles.digitsLarge}`}>{total}</span>\r\n      </div>\r\n\r\n      <div className={styles.totalWrapper}>\r\n        <span className={styles.totalTitle}>Выполнено за сегодня:</span>\r\n        <span className={`${styles.digits} ${styles.digitsLarge}`}>{totalToday}</span>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n","import React, { FC } from 'react';\r\n\r\nconst Loader: FC = () => (\r\n  <h1 className=\"text_centered  text  text_type_main-large  mt-30\">Данные загружаются</h1>\r\n);\r\n\r\nexport default Loader;\r\n","import React, { FC, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from '../../services/store';\r\n\r\nimport { WS_CONNECTION_CLOSE, WS_CONNECTION_START } from '../../services/slices/feed/feed';\r\n\r\nimport { ALL_ORDERS_URL } from '../../constants/api';\r\nimport styles from './feed.module.scss';\r\nimport { FeedList } from '../../components/feed-list/feed-list';\r\nimport { FeedStats } from '../../components/feed-stats/feed-stats';\r\nimport Loader from '../../components/loader/loader';\r\n\r\nexport const Feed: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const orders = useSelector((state) => state.feed.orders);\r\n\r\n  useEffect((): (() => void) => {\r\n    dispatch(WS_CONNECTION_START(ALL_ORDERS_URL));\r\n\r\n    return () => dispatch(WS_CONNECTION_CLOSE());\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <div className={styles.feedWrapper}>\r\n      {!orders.length && <Loader />}\r\n      {!!orders.length && (\r\n        <>\r\n          <h1 className={`${styles.title}`}>Лента заказов</h1>\r\n\r\n          <main className={`${styles.main}`}>\r\n            <FeedList />\r\n\r\n            <FeedStats />\r\n          </main>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport { useSelector } from '../../services/store';\r\n\r\nimport { getDateTime } from '../../utils';\r\n\r\nimport { TIngredient } from '../../services/slices/burger/types';\r\nimport { TOrderInfo } from '../../services/slices/order/types';\r\n\r\nimport styles from './order-info.module.scss';\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nexport const OrderInfo = () => {\r\n  const { ingredients } = useSelector((state) => state.burger);\r\n  const order = useSelector((state) => state.order.order);\r\n  const { name, status, ingredients: orderIngredients, createdAt } = order as TOrderInfo;\r\n\r\n  const time = getDateTime(createdAt);\r\n\r\n  const feedOrderIngredients = useMemo(() => {\r\n    return ingredients.filter((ingredient: TIngredient) => orderIngredients.includes(ingredient._id));\r\n  }, [orderIngredients, ingredients]);\r\n\r\n  const price = useMemo(() => {\r\n    return feedOrderIngredients.reduce(\r\n      (acc: number, el: TIngredient) => (el.type === 'bun' ? acc + el.price * 2 : acc + el.price),\r\n      0\r\n    );\r\n  }, [feedOrderIngredients]);\r\n\r\n  return (\r\n    <section>\r\n      <h2 className={`${styles.title}  mb-3`}>{name}</h2>\r\n      <span className={styles.status}>{status === 'done' ? 'Выполнен' : 'В работе'}</span>\r\n\r\n      <span className={`${styles.title}  mb-6`}>Состав:</span>\r\n\r\n      <ul className={`${styles.list} scroll`}>\r\n        {feedOrderIngredients.map(({ _id, image_mobile, name, price, type }: TIngredient) => (\r\n          <li className={styles.item} key={_id}>\r\n            <span className={styles.imgWrapper}>\r\n              <img className={styles.img} src={image_mobile} alt={name} width=\"64\" height=\"64\" />\r\n            </span>\r\n            <span className={styles.ingredient}>{name}</span>\r\n\r\n            <div className={styles.flexWrapper}>\r\n              <span>{type === 'bun' ? 2 : 1}</span>x<span>{price}</span>\r\n              <CurrencyIcon type=\"primary\" />\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n\r\n      <div className={styles.total}>\r\n        <span className={styles.datetime}>{time}</span>\r\n        <span className={styles.price}>{price}</span>\r\n        <CurrencyIcon type=\"primary\" />\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n","import React, { FC, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from '../../services/store';\r\n\r\nimport { getOrderInfo } from '../../services/slices/order/order';\r\n\r\nimport styles from './feed-order.module.scss';\r\nimport { OrderInfo } from '../../components/order-info/order-info';\r\n\r\nexport const FeedOrder: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const { id } = useParams<{ id: string }>();\r\n  const order = useSelector((state) => state.order.order);\r\n\r\n  useEffect(() => {\r\n    dispatch(getOrderInfo(id));\r\n  }, [dispatch, id]);\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      {order && (\r\n        <>\r\n          <span className={styles.number}>#{order.number}</span>\r\n          <OrderInfo />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { ChangeEvent, FormEvent, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from '../../services/store';\r\n\r\nimport { loginRequest } from '../../services/slices/auth/auth';\r\n\r\nimport styles from '../form.module.scss';\r\nimport { Button, Input, PasswordInput } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nexport const Login = () => {\r\n  const dispatch = useDispatch();\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    password: '',\r\n  });\r\n  const { isLoading } = useSelector((state) => state.auth);\r\n\r\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const value = e.target.value;\r\n    const name = e.target.name;\r\n\r\n    setFormData({\r\n      ...formData,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const onSubmit = (e: FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    dispatch(loginRequest(formData));\r\n  };\r\n\r\n  return (\r\n    <section className={styles.formWrapper}>\r\n      <form className={styles.form} onSubmit={onSubmit}>\r\n        <h2 className={styles.formTitle}>Вход</h2>\r\n\r\n        <div className={styles.inputWrapper}>\r\n          <Input\r\n            type={'email'}\r\n            placeholder={'Email'}\r\n            onChange={onChange}\r\n            value={formData.email}\r\n            name={'email'}\r\n          />\r\n        </div>\r\n        <div className={styles.inputWrapper}>\r\n          <PasswordInput onChange={onChange} value={formData.password} name={'password'} />\r\n        </div>\r\n\r\n        {isLoading ? (\r\n          <span className=\"text text_type_main-default\">Идёт запрос...</span>\r\n        ) : (\r\n          <Button type=\"primary\" size=\"medium\">\r\n            Войти\r\n          </Button>\r\n        )}\r\n      </form>\r\n\r\n      <div className={`${styles.flexWrapper}  mb-4`}>\r\n        <span className={styles.formText}>Вы — новый пользователь?</span>\r\n        <Link className={styles.formLink} to=\"/register\">\r\n          Зарегистрироваться\r\n        </Link>\r\n      </div>\r\n      <div className={styles.flexWrapper}>\r\n        <span className={styles.formText}>Забыли пароль?</span>\r\n        <Link className={styles.formLink} to=\"/forgot-password\">\r\n          Восстановить пароль\r\n        </Link>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n","import React, { ChangeEvent, FC, FormEvent, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from '../../services/store';\r\n\r\nimport { registerRequest } from '../../services/slices/auth/auth';\r\n\r\nimport styles from '../form.module.scss';\r\nimport { Button, Input, PasswordInput } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nexport const Register: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    email: '',\r\n    password: '',\r\n  });\r\n  const { isLoading } = useSelector((state) => state.auth);\r\n\r\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const value = e.target.value;\r\n    const name = e.target.name;\r\n\r\n    setFormData({\r\n      ...formData,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const onSubmit = (e: FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    dispatch(registerRequest(formData));\r\n  };\r\n\r\n  return (\r\n    <section className={styles.formWrapper}>\r\n      <form className={styles.form} onSubmit={onSubmit}>\r\n        <h2 className={styles.formTitle}>Регистрация</h2>\r\n\r\n        <div className={styles.inputWrapper}>\r\n          <Input type={'text'} placeholder={'Имя'} onChange={onChange} value={formData.name} name={'name'} />\r\n        </div>\r\n        <div className={styles.inputWrapper}>\r\n          <Input\r\n            type={'email'}\r\n            placeholder={'Email'}\r\n            onChange={onChange}\r\n            value={formData.email}\r\n            name={'email'}\r\n          />\r\n        </div>\r\n        <div className={styles.inputWrapper}>\r\n          <PasswordInput onChange={onChange} value={formData.password} name={'password'} />\r\n        </div>\r\n\r\n        {isLoading ? (\r\n          <span className=\"text text_type_main-default\">Идёт запрос...</span>\r\n        ) : (\r\n          <Button type=\"primary\" size=\"medium\">\r\n            Зарегистрироваться\r\n          </Button>\r\n        )}\r\n      </form>\r\n\r\n      <div className={styles.flexWrapper}>\r\n        <span className={styles.formText}>Уже зарегистрированы?</span>\r\n        <Link className={styles.formLink} to=\"/login\">\r\n          Войти\r\n        </Link>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n","import React, { ChangeEvent, FC, FormEvent, useState } from 'react';\r\nimport { Link, Redirect, useLocation } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from '../../services/store';\r\n\r\nimport { sendResetPasswordEmail } from '../../services/slices/password/password';\r\n\r\nimport styles from '../form.module.scss';\r\nimport { Button, Input } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nexport const ForgotPassword: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n  });\r\n  const { isLoading, isResetEmailSent } = useSelector((state) => state.password);\r\n\r\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const value = e.target.value;\r\n    const name = e.target.name;\r\n\r\n    setFormData({\r\n      ...formData,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const onSubmit = (e: FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    dispatch(sendResetPasswordEmail(formData));\r\n  };\r\n\r\n  if (isResetEmailSent) {\r\n    return <Redirect to={{ pathname: '/reset-password', state: { from: location.pathname } }} />;\r\n  }\r\n\r\n  return (\r\n    <section className={styles.formWrapper}>\r\n      <form className={styles.form} onSubmit={onSubmit}>\r\n        <h2 className={styles.formTitle}>Восстановление пароля</h2>\r\n\r\n        <div className={styles.inputWrapper}>\r\n          <Input\r\n            type={'email'}\r\n            placeholder={'Email'}\r\n            onChange={onChange}\r\n            value={formData.email}\r\n            name={'email'}\r\n          />\r\n        </div>\r\n\r\n        {isLoading ? (\r\n          <span className=\"text text_type_main-default\">Идёт запрос...</span>\r\n        ) : (\r\n          <Button type=\"primary\" size=\"medium\">\r\n            Сохранить\r\n          </Button>\r\n        )}\r\n      </form>\r\n\r\n      <div className={styles.flexWrapper}>\r\n        <span className={styles.formText}>Вспомнили пароль?</span>\r\n        <Link className={styles.formLink} to=\"/login\">\r\n          Войти\r\n        </Link>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n","import React, { ChangeEvent, FC, FormEvent, useRef, useState } from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from '../../services/store';\r\n\r\nimport { resetPassword } from '../../services/slices/password/password';\r\n\r\nimport styles from '../form.module.scss';\r\nimport { Button, Input } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nexport const ResetPassword: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  const [isPasswordVisible, setIsPasswordVisible] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    password: '',\r\n    token: '',\r\n  });\r\n  const { isLoading, isPasswordReset } = useSelector((state) => state.password);\r\n\r\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const value = e.target.value;\r\n    const name = e.target.name;\r\n\r\n    setFormData({\r\n      ...formData,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const onIconClick = () => {\r\n    if (inputRef && inputRef.current) {\r\n      inputRef.current.type = inputRef.current.type === 'password' ? 'text' : 'password';\r\n      setIsPasswordVisible((prevState) => !prevState);\r\n    }\r\n  };\r\n\r\n  const onSubmit = (e: FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    dispatch(resetPassword(formData));\r\n  };\r\n\r\n  if (isPasswordReset) return <Redirect to=\"/login\" />;\r\n\r\n  return (\r\n    <section className={styles.formWrapper}>\r\n      <form className={styles.form} onSubmit={onSubmit}>\r\n        <h2 className={styles.formTitle}>Восстановление пароля</h2>\r\n\r\n        <div className={styles.inputWrapper}>\r\n          <Input\r\n            ref={inputRef}\r\n            type={'password'}\r\n            placeholder={'Введите новый пароль'}\r\n            icon={isPasswordVisible ? 'HideIcon' : 'ShowIcon'}\r\n            onIconClick={onIconClick}\r\n            onChange={onChange}\r\n            value={formData.password}\r\n            name={'password'}\r\n          />\r\n        </div>\r\n        <div className={styles.inputWrapper}>\r\n          <Input\r\n            type={'text'}\r\n            placeholder={'Введите код из письма'}\r\n            onChange={onChange}\r\n            value={formData.token}\r\n            name={'token'}\r\n          />\r\n        </div>\r\n\r\n        {isLoading ? (\r\n          <span className=\"text text_type_main-default\">Идёт запрос...</span>\r\n        ) : (\r\n          <Button type=\"primary\" size=\"medium\">\r\n            Восстановить\r\n          </Button>\r\n        )}\r\n      </form>\r\n\r\n      <div className={styles.flexWrapper}>\r\n        <span className={styles.formText}>Вспомнили пароль?</span>\r\n        <Link className={styles.formLink} to=\"/login\">\r\n          Войти\r\n        </Link>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n","import React, { FC } from 'react';\r\n\r\nimport styles from './not-found.module.scss';\r\n\r\nexport const NotFound404: FC = () => (\r\n  <div className={styles.wrapper}>\r\n    <h1 className={styles.title}>404</h1>\r\n    <span className={styles.text}>Страница не найдена</span>\r\n  </div>\r\n);\r\n","import React, { FC } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from '../../services/store';\r\n\r\nimport { logoutRequest } from '../../services/slices/auth/auth';\r\n\r\nimport styles from './profile-nav.module.scss';\r\n\r\nexport const ProfileNav: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const isLoading = useSelector((state) => state.auth.isLoading);\r\n\r\n  const onLogoutClick = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n    e.preventDefault();\r\n    dispatch(logoutRequest());\r\n  };\r\n\r\n  return (\r\n    <section className={styles.nav}>\r\n      <ul className={styles.list}>\r\n        <li>\r\n          <NavLink className={styles.link} activeClassName={styles.activeLink} to=\"/profile\" exact>\r\n            Профиль\r\n          </NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink className={styles.link} activeClassName={styles.activeLink} to=\"/profile/orders\">\r\n            История заказов\r\n          </NavLink>\r\n        </li>\r\n        <li>\r\n          {isLoading ? (\r\n            <button className={`${styles.link} ${styles.button}`}>Идёт запрос...</button>\r\n          ) : (\r\n            <button className={`${styles.link} ${styles.button}`} onClick={onLogoutClick}>\r\n              Выход\r\n            </button>\r\n          )}\r\n        </li>\r\n      </ul>\r\n\r\n      <p className={styles.info}>\r\n        В этом разделе вы можете\r\n        <br /> изменить свои персональные данные\r\n      </p>\r\n    </section>\r\n  );\r\n};\r\n","import React, { ChangeEvent, FC, FormEvent, useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from '../../services/store';\r\n\r\nimport { getUserInfoRequest, updateUserInfoRequest } from '../../services/slices/user/user';\r\n\r\nimport styles from './profile-form.module.scss';\r\nimport { Button, Input } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nexport const ProfileForm: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const { user, isLoading } = useSelector((state) => state.user);\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    email: '',\r\n    password: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    dispatch(getUserInfoRequest());\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    user &&\r\n      setFormData((state) => ({\r\n        ...state,\r\n        name: user.name,\r\n        email: user.email,\r\n      }));\r\n  }, [user]);\r\n\r\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const value = e.target.value;\r\n    const name = e.target.name;\r\n\r\n    setFormData({\r\n      ...formData,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const onCancelClick = (e: MouseEvent) => {\r\n    e.preventDefault();\r\n\r\n    user &&\r\n      setFormData({\r\n        name: user.name,\r\n        email: user.email,\r\n        password: '',\r\n      });\r\n  };\r\n\r\n  const onSubmit = (e: FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    dispatch(updateUserInfoRequest(formData));\r\n  };\r\n\r\n  return (\r\n    user && (\r\n      <form onSubmit={onSubmit} className={styles.form}>\r\n        <div className={styles.inputWrapper}>\r\n          <Input\r\n            type={'text'}\r\n            placeholder={'Имя'}\r\n            onChange={onChange}\r\n            icon={'EditIcon'}\r\n            value={formData.name}\r\n            name={'name'}\r\n          />\r\n        </div>\r\n        <div className={styles.inputWrapper}>\r\n          <Input\r\n            type={'email'}\r\n            placeholder={'Логин'}\r\n            onChange={onChange}\r\n            icon={'EditIcon'}\r\n            value={formData.email}\r\n            name={'email'}\r\n          />\r\n        </div>\r\n        <div className={styles.inputWrapper}>\r\n          <Input\r\n            type={'password'}\r\n            placeholder={'Пароль'}\r\n            onChange={onChange}\r\n            icon={'EditIcon'}\r\n            value={formData.password}\r\n            name={'password'}\r\n          />\r\n        </div>\r\n\r\n        {isLoading ? (\r\n          <span className=\"text text_type_main-default text_centered\">Идёт запрос...</span>\r\n        ) : (\r\n          <div className={styles.buttonsWrapper}>\r\n            <Button type=\"secondary\" size=\"medium\" onClick={() => onCancelClick}>\r\n              Отмена\r\n            </Button>\r\n            <Button type=\"primary\" size=\"medium\">\r\n              Сохранить\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </form>\r\n    )\r\n  );\r\n};\r\n","import React, { FC } from 'react';\r\n\r\nimport styles from './profile.module.scss';\r\nimport { ProfileNav } from '../../components/profile-nav/profile-nav';\r\nimport { ProfileForm } from '../../components/profile-form/profile-form';\r\n\r\nexport const Profile: FC = () => (\r\n  <div className={styles.flexWrapper}>\r\n    <ProfileNav />\r\n    <ProfileForm />\r\n  </div>\r\n);\r\n","import React, { FC, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from '../../services/store';\r\n\r\nimport { WS_CONNECTION_CLOSE, WS_CONNECTION_START } from '../../services/slices/feed/feed';\r\nimport { WS_URL } from '../../constants/api';\r\nimport { getCookie } from '../../utils/cookie';\r\n\r\nimport styles from '../profile/profile.module.scss';\r\nimport { ProfileNav } from '../../components/profile-nav/profile-nav';\r\nimport { FeedList } from '../../components/feed-list/feed-list';\r\nimport Loader from '../../components/loader/loader';\r\n\r\nexport const History: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const orders = useSelector((state) => state.feed.orders);\r\n\r\n  useEffect((): (() => void) => {\r\n    dispatch(WS_CONNECTION_START(`${WS_URL}?token=${getCookie('accessToken')}`));\r\n\r\n    return () => dispatch(WS_CONNECTION_CLOSE());\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <div className={styles.flexWrapper}>\r\n      <ProfileNav />\r\n      {!orders.length && <Loader />}\r\n      {!!orders.length && <FeedList />}\r\n    </div>\r\n  );\r\n};\r\n","import React, { FC } from 'react';\r\nimport { useSelector } from '../../services/store';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport { TIngredient } from '../../services/slices/burger/types';\r\n\r\nimport styles from './ingredient-details.module.scss';\r\n\r\ninterface IIngredientDetailsProps {\r\n  withTitle?: boolean;\r\n}\r\n\r\nconst IngredientDetails: FC<IIngredientDetailsProps> = ({ withTitle }) => {\r\n  const { id } = useParams<{ id: string }>();\r\n  const ingredients = useSelector((state) => state.burger.ingredients);\r\n  const ingredient = ingredients.find((ing: TIngredient) => ing._id === id);\r\n  const { image_large, name, calories, proteins, fat, carbohydrates } = ingredient;\r\n\r\n  return (\r\n    <section>\r\n      {withTitle && <h2 className={styles.title}>Детали ингредиента</h2>}\r\n\r\n      <img className={`${styles.image}  mb-4`} src={image_large} alt={name} width={480} height={240} />\r\n\r\n      <span className={`${styles.name}  mb-8`}>{name}</span>\r\n\r\n      <section className={styles.flexWrapper}>\r\n        <div className=\"mr-5\">\r\n          <span className={`${styles.text}  text_type_main-default  mb-2`}>Калории,ккал</span>\r\n          <span className={`${styles.text}  ${styles.amount}`}>{calories}</span>\r\n        </div>\r\n        <div className=\"mr-5\">\r\n          <span className={`${styles.text}  text_type_main-default  mb-2`}>Белки, г</span>\r\n          <span className={`${styles.text}  ${styles.amount}`}>{proteins}</span>\r\n        </div>\r\n        <div className=\"mr-5\">\r\n          <span className={`${styles.text}  text_type_main-default  mb-2`}>Жиры, г</span>\r\n          <span className={`${styles.text}  ${styles.amount}`}>{fat}</span>\r\n        </div>\r\n        <div>\r\n          <span className={`${styles.text}  text_type_main-default  mb-2`}>Углеводы, г</span>\r\n          <span className={`${styles.text}  ${styles.amount}`}>{carbohydrates}</span>\r\n        </div>\r\n      </section>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default IngredientDetails;\r\n","import React, { FC } from 'react';\r\n\r\nimport styles from './ingredient.module.scss';\r\nimport IngredientDetails from '../../components/ingredient-details/ingredient-details';\r\n\r\nexport const Ingredient: FC = () => (\r\n  <div className={styles.wrapper}>\r\n    <IngredientDetails withTitle />\r\n  </div>\r\n);\r\n","import React, { ElementType, FC } from 'react';\r\n\r\nimport styles from './link-item.module.scss';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\ninterface ILinkItemProps {\r\n  Icon: ElementType;\r\n  text: string;\r\n  to: string;\r\n}\r\n\r\nconst LinkItem: FC<ILinkItemProps> = ({ Icon, text, to }) => {\r\n  return (\r\n    <NavLink className={styles.link} activeClassName={styles.active} to={to} exact>\r\n      <Icon />\r\n      <span className={styles.text}>{text}</span>\r\n    </NavLink>\r\n  );\r\n};\r\n\r\nexport default LinkItem;\r\n","import React, { FC } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport styles from './logo-wrapper.module.scss';\r\nimport { Logo } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nconst LogoWrapper: FC = () => (\r\n  <Link className={styles.logo} to=\"/\">\r\n    <Logo />\r\n  </Link>\r\n);\r\n\r\nexport default LogoWrapper;\r\n","import React, { FC } from 'react';\r\n\r\nimport styles from './profile-link.module.scss';\r\nimport { ProfileIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport LinkItem from '../../link-item/link-item';\r\n\r\nconst ProfileLink: FC = () => (\r\n  <div className={styles.profile}>\r\n    <LinkItem Icon={ProfileIcon} text=\"Личный кабинет\" to=\"/profile\" />\r\n  </div>\r\n);\r\n\r\nexport default ProfileLink;\r\n","import React, { FC } from 'react';\r\n\r\nimport styles from './nav.module.scss';\r\nimport { BurgerIcon, ListIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport LinkItem from '../../link-item/link-item';\r\nimport LogoWrapper from '../logo-wrapper/logo-wrapper';\r\nimport ProfileLink from '../profile-link/profile-link';\r\n\r\nconst Nav: FC = () => (\r\n  <nav className={styles.nav}>\r\n    <ul className={styles.list}>\r\n      <li className={styles.item}>\r\n        <LinkItem Icon={BurgerIcon} text=\"Конструктор\" to=\"/\" />\r\n      </li>\r\n      <li className={styles.item}>\r\n        <LinkItem Icon={ListIcon} text=\"Лента заказов\" to=\"/feed\" />\r\n      </li>\r\n    </ul>\r\n\r\n    <LogoWrapper />\r\n\r\n    <ProfileLink />\r\n  </nav>\r\n);\r\n\r\nexport default Nav;\r\n","import React, { FC } from 'react';\r\n\r\nimport styles from './app-header.module.scss';\r\nimport Nav from './nav/nav';\r\n\r\nconst AppHeader: FC = () => (\r\n  <header className={styles.header}>\r\n    <Nav />\r\n  </header>\r\n);\r\n\r\nexport default AppHeader;\r\n","import React, { FC } from 'react';\r\nimport { Redirect, Route, RouteProps } from 'react-router-dom';\r\nimport { useSelector } from '../../services/store';\r\n\r\nexport const ProtectedRoute: FC<RouteProps> = ({ children, ...rest }) => {\r\n  const isLoggedIn = useSelector((state) => state.auth.isLoggedIn);\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        isLoggedIn ? children : <Redirect to={{ pathname: '/login', state: { from: location } }} />\r\n      }\r\n    />\r\n  );\r\n};\r\n","import React, { FC } from 'react';\r\nimport { Redirect, Route, RouteProps } from 'react-router-dom';\r\nimport { useSelector } from '../../services/store';\r\n\r\ninterface CustomizedState {\r\n  from: { pathname: string };\r\n}\r\n\r\nexport const ProtectedRouteAuthorized: FC<RouteProps> = ({ children, ...rest }) => {\r\n  const isLoggedIn = useSelector((state) => state.auth.isLoggedIn);\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) => {\r\n        const state = location.state as CustomizedState;\r\n        return isLoggedIn ? <Redirect to={state?.from?.pathname || '/'} /> : children;\r\n      }}\r\n    />\r\n  );\r\n};\r\n","import React, { FC } from 'react';\r\nimport { Redirect, Route, RouteProps } from 'react-router-dom';\r\nimport { useSelector } from '../../services/store';\r\n\r\ninterface CustomizedState {\r\n  from: string;\r\n}\r\n\r\nexport const ProtectedRouteWithReset: FC<RouteProps> = ({ children, ...rest }) => {\r\n  const isLoggedIn = useSelector((state) => state.auth.isLoggedIn);\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) => {\r\n        const state = location.state as CustomizedState;\r\n        return isLoggedIn || state?.from !== '/forgot-password' ? <Redirect to=\"/\" /> : children;\r\n      }}\r\n    />\r\n  );\r\n};\r\n","import React, { FC, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from '../../services/store';\r\n\r\nimport { getOrderInfo } from '../../services/slices/order/order';\r\n\r\nimport { OrderInfo } from '../order-info/order-info';\r\nimport Modal from '../modal/modal';\r\n\r\ninterface IFeedModalProps {\r\n  onModalClose: () => void;\r\n}\r\n\r\nexport const FeedModal: FC<IFeedModalProps> = ({ onModalClose }) => {\r\n  const dispatch = useDispatch();\r\n  const { id } = useParams<{ id: string }>();\r\n  const order = useSelector((state) => state.order.order);\r\n\r\n  useEffect(() => {\r\n    dispatch(getOrderInfo(id));\r\n  }, [dispatch, id]);\r\n\r\n  return (\r\n    order && (\r\n      <Modal orderNumber={order.number} onModalClose={onModalClose}>\r\n        <OrderInfo />\r\n      </Modal>\r\n    )\r\n  );\r\n};\r\n","import React, { FC, useEffect } from 'react';\r\nimport { Switch, Route, useLocation, useHistory } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from '../../services/store';\r\nimport { Location } from 'history';\r\n\r\nimport { getCookie } from '../../utils/cookie';\r\nimport { getIngredients } from '../../services/slices/burger/burger';\r\nimport { getUserInfoRequest } from '../../services/slices/user/user';\r\nimport { resetOrder } from '../../services/slices/order/order';\r\n\r\nimport {\r\n  Constructor,\r\n  Feed,\r\n  FeedOrder,\r\n  ForgotPassword,\r\n  History,\r\n  Ingredient,\r\n  Login,\r\n  NotFound404,\r\n  Profile,\r\n  Register,\r\n  ResetPassword,\r\n} from '../../pages';\r\nimport AppHeader from '../app-header/app-header';\r\nimport { ProtectedRoute } from '../protected-route/protected-route';\r\nimport { ProtectedRouteAuthorized } from '../protected-route-authorized/protected-route-authorized';\r\nimport { ProtectedRouteWithReset } from '../protected-route-with-reset/protected-route-with-reset';\r\nimport IngredientDetails from '../ingredient-details/ingredient-details';\r\nimport Modal from '../modal/modal';\r\nimport Loader from '../loader/loader';\r\nimport { FeedModal } from '../feed-modal/feed-modal';\r\n\r\ninterface ILocationState extends Location {\r\n  background?: Location<unknown>;\r\n}\r\n\r\nconst App: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const location = useLocation<ILocationState>();\r\n  const history = useHistory();\r\n  const accessToken = getCookie('accessToken');\r\n  const { ingredients, isLoading } = useSelector((state) => state.burger);\r\n  const background = history.action === 'PUSH' && location.state && location.state.background;\r\n\r\n  useEffect(() => {\r\n    !ingredients.length && dispatch(getIngredients());\r\n    accessToken && dispatch(getUserInfoRequest());\r\n  }, [dispatch, accessToken, ingredients]);\r\n\r\n  const onModalClose = () => history.goBack();\r\n  const onOrderInfoModalClose = () => {\r\n    dispatch(resetOrder());\r\n    history.goBack();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <AppHeader />\r\n\r\n      {isLoading && <Loader />}\r\n\r\n      {!!ingredients.length && (\r\n        <>\r\n          <Switch location={background || location}>\r\n            <Route exact path=\"/\">\r\n              <Constructor />\r\n            </Route>\r\n            <ProtectedRouteAuthorized exact path=\"/login\">\r\n              <Login />\r\n            </ProtectedRouteAuthorized>\r\n            <ProtectedRouteAuthorized exact path=\"/register\">\r\n              <Register />\r\n            </ProtectedRouteAuthorized>\r\n            <ProtectedRouteAuthorized exact path=\"/forgot-password\">\r\n              <ForgotPassword />\r\n            </ProtectedRouteAuthorized>\r\n            <ProtectedRouteWithReset exact path=\"/reset-password\">\r\n              <ResetPassword />\r\n            </ProtectedRouteWithReset>\r\n            <Route exact path=\"/ingredients/:id\">\r\n              <Ingredient />\r\n            </Route>\r\n            <Route exact path=\"/feed\">\r\n              <Feed />\r\n            </Route>\r\n            <Route exact path=\"/feed/:id\">\r\n              <FeedOrder />\r\n            </Route>\r\n            <ProtectedRoute exact path=\"/profile\">\r\n              <Profile />\r\n            </ProtectedRoute>\r\n            <ProtectedRoute exact path=\"/profile/orders\">\r\n              <History />\r\n            </ProtectedRoute>\r\n            <ProtectedRoute exact path=\"/profile/orders/:id\">\r\n              <FeedOrder />\r\n            </ProtectedRoute>\r\n            <Route>\r\n              <NotFound404 />\r\n            </Route>\r\n          </Switch>\r\n\r\n          {background && (\r\n            <Switch>\r\n              <Route exact path=\"/ingredients/:id\">\r\n                <Modal title=\"Детали ингредиента\" onModalClose={onModalClose}>\r\n                  <IngredientDetails />\r\n                </Modal>\r\n              </Route>\r\n              <Route exact path=\"/feed/:id\">\r\n                <FeedModal onModalClose={onOrderInfoModalClose} />\r\n              </Route>\r\n              <ProtectedRoute exact path=\"/profile/orders/:id\">\r\n                <FeedModal onModalClose={onOrderInfoModalClose} />\r\n              </ProtectedRoute>\r\n            </Switch>\r\n          )}\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nimport store from './services/store';\r\n\r\nimport './index.scss';\r\nimport App from './components/app/app';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <BrowserRouter>\r\n        <App />\r\n      </BrowserRouter>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"order-info_title__pFu8N text text_type_main-medium\",\"status\":\"order-info_status__qG-Du text text_type_main-default mb-15\",\"list\":\"order-info_list__1sEBM mb-10 pr-6\",\"item\":\"order-info_item__29Wuv mb-4\",\"imgWrapper\":\"order-info_imgWrapper__1avXy mr-4\",\"img\":\"order-info_img__38OCx\",\"ingredient\":\"order-info_ingredient__3Izos text text_type_main-default mr-4\",\"flexWrapper\":\"order-info_flexWrapper__24yJg text text_type_digits-default\",\"total\":\"order-info_total__3EE0G\",\"datetime\":\"order-info_datetime__1FCRb text text_type_main-default text_color_inactive\",\"price\":\"order-info_price__1WM52 text text_type_digits-default mr-2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"profile-nav_nav__3yYgt mr-15\",\"list\":\"profile-nav_list__2_bMa mb-20\",\"link\":\"profile-nav_link__1Vj5t text text_type_main-medium text_color_inactive pt-4 pb-4\",\"button\":\"profile-nav_button__2drUT\",\"activeLink\":\"profile-nav_activeLink__1L6Mh\",\"info\":\"profile-nav_info__1mk-Z text text_type_main-default text_color_inactive\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"ingredient_item__1ERU3\",\"image\":\"ingredient_image__313gV\",\"priceWrapper\":\"ingredient_priceWrapper__31AOk\",\"price\":\"ingredient_price__2PcWj text text_type_digits-default mr-2\",\"name\":\"ingredient_name__-tei_ text text_type_main-default\",\"link\":\"ingredient_link__1LjSh\",\"ingredient\":\"ingredient_ingredient__vpDo8 pl-4 pr-4 mb-1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredientsWrapper\":\"ingredients-list_ingredientsWrapper__1rHtF pr-2\",\"fixedHeight\":\"ingredients-list_fixedHeight__3vjVw\",\"scrollHeight\":\"ingredients-list_scrollHeight__2J5MN\",\"title\":\"ingredients-list_title__11uUH text text_type_main-medium\",\"bun\":\"ingredients-list_bun__243lU pl-8 pr-4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formWrapper\":\"form_formWrapper__2VnMU\",\"form\":\"form_form__3i3Ce mb-20\",\"formTitle\":\"form_formTitle__1gszs text text_type_main-medium mb-6\",\"inputWrapper\":\"form_inputWrapper__G7dR1 mb-6\",\"flexWrapper\":\"form_flexWrapper__17-ZQ\",\"formText\":\"form_formText__1Ex0s text text_type_main-default text_color_inactive mr-2\",\"formLink\":\"form_formLink__3tq_l text text_type_main-default\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"modal_wrapper__1K9BY\",\"modal\":\"modal_modal__1Gyg0\",\"header\":\"modal_header__14lFl\",\"title\":\"modal_title__16YV7\",\"icon\":\"modal_icon__3Bv0A\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"order-details_title__24EIu\",\"titleText\":\"order-details_titleText__2OqEr\",\"icon\":\"order-details_icon__2mJ4o\",\"text\":\"order-details_text__49U_i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"profile-form_form__1fK_p mb-6\",\"inputWrapper\":\"profile-form_inputWrapper__1CBbg mb-6\",\"buttonsWrapper\":\"profile-form_buttonsWrapper__1hTP1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"totalWrapper\":\"cart_totalWrapper__3IyYS mr-4\",\"priceWrapper\":\"cart_priceWrapper__9-ejy mr-10\",\"price\":\"cart_price__3Dt3H text text_type_digits-medium mr-2\",\"loader\":\"cart_loader__3mABy text text_type_main-medium\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"nav_nav__3FsUG\",\"list\":\"nav_list__A1VvR\",\"item\":\"nav_item__12Ux8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"flexWrapper\":\"profile_flexWrapper__33jA1 pt-30\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"element\":\"burger-element_element__rJMCh pl-8\",\"draggable\":\"burger-element_draggable__3uQ0G\",\"fixed\":\"burger-element_fixed__rK1Ye pr-4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"feedWrapper\":\"feed_feedWrapper__17l8P mt-10\",\"title\":\"feed_title__kIcHI text text_type_main-large mb-5 pl-2\",\"main\":\"feed_main__3jcoA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"not-found_wrapper__1ySdQ\",\"title\":\"not-found_title__3y482 text text_type_digits-large\",\"text\":\"not-found_text__yEXzQ text text_type_main-large\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"link-item_link__4b3zW text text_type_main-default text_color_inactive p-4 pl-5 pr-5\",\"text\":\"link-item_text__XkUQ9 ml-2\",\"active\":\"link-item_active__6JvV9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"burger-ingredients_content__2a2gm\",\"ingredientsWrapper\":\"burger-ingredients_ingredientsWrapper__3Jvhu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"feed-order_wrapper__3cJMm mt-30\",\"number\":\"feed-order_number__1ty-W text text_type_digits-default mb-10\"};"],"sourceRoot":""}